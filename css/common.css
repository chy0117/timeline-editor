:root{
  --bg:#020617;
  --fg:#e5e7eb;
  --sidebar-bg:#020617;
  --border:#111827;
  --viewport-bg:#020617;
  --block-bg:#020617;
  --hour-label:#6b7280;
  --hour-line:rgba(31,41,55,0.8);
  --accent:#22c55e;
  --accent-strong:#16a34a;
  --muted:#6b7280;

  /* ---------- Global UI Scale ---------- */
  --ui-label:16px;
  --ui-input:16px;
  --ui-small:14px;
  --ui-radius:16px;
  --ui-pad-y:12px;
  --ui-pad-x:14px;
  --ui-gap:16px;
  --ui-row-gap:10px;
  --ui-min-hit:44px;

    /* ---------- Timeline Grid Colors ---------- */
  --tl-bg: #0b1220;                 /* 다크 타임라인 배경 */
  --tl-label: rgba(229,231,235,0.70);
  --tl-line: rgba(229,231,235,0.18);
  --tl-line-soft: rgba(229,231,235,0.10);
  --tl-boundary: rgba(229,231,235,0.28);

  --tl-boundary-label-bg: rgba(2,6,23,0.85);
  --tl-boundary-label-fg: rgba(229,231,235,0.85);
  --tl-boundary-label-border: rgba(148,163,184,0.22);
}

body.theme-light{
  --bg:#f9fafb;
  --fg:#020617;
  --sidebar-bg:#ffffff;
  --border:#e5e7eb;
  --viewport-bg:#f3f4f6;
  --block-bg:#ffffff;
  --hour-label:#9ca3af;
  --hour-line:#e5e7eb;
  --accent:#22c55e;
  --accent-strong:#15803d;
  --muted:#9ca3af;
   /* ---------- Timeline Grid Colors (Light) ---------- */
  --tl-bg: #ffffff;
  --tl-label: rgba(17,24,39,0.55);
  --tl-line: rgba(17,24,39,0.18);
  --tl-line-soft: rgba(17,24,39,0.10);
  --tl-boundary: rgba(17,24,39,0.25);

  --tl-boundary-label-bg: #ffffff;
  --tl-boundary-label-fg: rgba(17,24,39,0.70);
  --tl-boundary-label-border: rgba(229,231,235,1);
}

*{ box-sizing:border-box; }

/* ---------- Base Layout ---------- */
body{
  margin:0;
  height:100vh;
  display:flex;
  background:var(--bg);
  color:var(--fg);
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  font-size:var(--ui-input);
}

.sidebar{
  width:360px;
  height:100vh;
  background:var(--sidebar-bg);
  border-right:1px solid var(--border);
  display:flex;
  flex-direction:column;
  overflow:hidden;          /* ✅ 스크롤은 아래 .sidebar-scroll이 담당 */
  padding:0;                /* ✅ 패딩은 top/scroll에 분리 */
  z-index:2;
}

/* ✅ 고정 영역 (H1 + STEP NAV) */
.sidebar-top{
  flex:0 0 auto;
  padding:18px 20px 10px;
  background:var(--sidebar-bg);
  border-bottom:1px solid rgba(148,163,184,0.10);
}

/* ✅ 스크롤 영역 (STEP 패널들 전부) */
.sidebar-scroll{
  flex:1 1 auto;
  min-height:0;             /* ✅ 중요: flex 내부 overflow 작동 */
  overflow-y:auto;
  padding:12px 20px 18px;
  display:flex;
  flex-direction:column;
  gap:var(--ui-gap);
}


.main{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:16px;
}

h1{
  font-size:20px;
  margin:0 0 10px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:8px;
  flex-wrap:nowrap;
}

/* ---------- Typography ---------- */
label{
  display:block;
  font-size:var(--ui-label);
  margin-bottom:8px;
  line-height:1.2;
  color:rgba(229,231,235,0.90);
}
body.theme-light label{ color:rgba(2,6,23,0.70); }

.hint{
  font-size:var(--ui-small);
  color:var(--muted);
  line-height:1.45;
  margin:6px 0 0;
}

/* Step1에서는 설명 텍스트 숨김(온보딩/설명서로 분리) */
body[data-step="1"] .hint{ display:none !important; }
#step2Panel .hint,
#step2Panel ul.hint{
  display:none !important;
}
/* ---------- Form Controls ---------- */
input,select,textarea,button{
  font-size:var(--ui-input);
  padding:var(--ui-pad-y) var(--ui-pad-x);
  border-radius:var(--ui-radius);
  border:1px solid var(--border);
  background:var(--bg);
  color:var(--fg);
  min-height:var(--ui-min-hit);
}
input,select,textarea{ width:100%; }
button{ width:auto; cursor:pointer; font-weight:600; margin-top:0; }
textarea{ resize:vertical; min-height:96px; }

input[type="file"]{
  min-height:auto;
  padding:8px 8px;
  border-radius:12px;
  background:transparent;
}

.row{
  display:flex;
  gap:var(--ui-row-gap);
  align-items:center;
}
.row > *{ flex:1; }

/* ---------- Buttons ---------- */
.btn-primary, .btn-secondary{ width:100%; }

.btn-primary{
  background:var(--accent);
  border-color:var(--accent-strong);
  color:#020617;
}
.btn-primary:hover{ background:var(--accent-strong); }

.btn-secondary{
  background:transparent;
  border-color:var(--border);
  color:var(--fg);
}
.btn-secondary:hover{ background:rgba(148,163,184,0.12); }

.btn-theme{
  width:auto !important;
  min-height:40px;
  padding:8px 12px;
  font-size:12px;
  border-radius:999px;
  white-space:nowrap;
  flex-shrink:0;
  display:inline-flex;
  align-items:center;
  justify-content:center;
}

.btn-date{
  flex:0 0 auto;
  width:auto;
  min-height:var(--ui-min-hit);
  padding:var(--ui-pad-y) 12px;
  font-size:var(--ui-input);
  margin-top:0;
}
/* 캘린더 버튼 full width 방지 */
#datePickerBtn.btn-date{
  width:48px !important;
  min-width:48px !important;
  padding:0 !important;
}

/* ---------- Step Navigation ---------- */
.step-nav{
  display:flex;
  gap:10px;
  margin:6px 0 10px;
}
.step-btn{
  flex:1;
  padding:10px 10px;
  font-size:14px;
  border-radius:999px;
  border:1px solid var(--border);
  background:transparent;
  color:var(--muted);
  cursor:pointer;
  white-space:nowrap;
}
.step-btn.active{
  background:var(--accent);
  border-color:var(--accent-strong);
  color:#020617;
}
.step-panel{ display:none; }
.step-panel.active{ display:block; }
    /* ---------- Step2 Sub Navigation ---------- */
.step2-subnav{
  display:flex;
  gap:10px;
  margin-top:10px;
}

.step2-subnav .sub-btn{
  flex:1;
  padding:10px 10px;
  font-size:14px;
  border-radius:999px;
  border:1px solid var(--border);
  background:transparent;
  color:var(--muted);
  cursor:pointer;
  white-space:nowrap;
}

.step2-subnav .sub-btn.active{
  background:var(--accent);
  border-color:var(--accent-strong);
  color:#020617;
}

/* ---------- Toggle Buttons (공통) ---------- */
.item-type-toggle,
.animation-mode-toggle,
.title-font-toggle,
.text-font-toggle{
  display:flex;
  gap:6px;
  margin-top:8px;
}

.item-type-toggle .toggle-btn,
.animation-mode-toggle .toggle-btn,
.title-font-toggle .toggle-btn,
.text-font-toggle .toggle-btn{
  flex:1;
  padding:0 10px;
  min-height:44px;
  font-size:18px;
  line-height:1;
  border-radius:999px;
  border:1px solid var(--border);
  background:transparent;
  color:var(--muted);
  cursor:pointer;
  margin-top:0;
  white-space:nowrap;
  display:inline-flex;
  align-items:center;
  justify-content:center;
}

.item-type-toggle .toggle-btn.active,
.animation-mode-toggle .toggle-btn.active,
.title-font-toggle .toggle-btn.active,
.text-font-toggle .toggle-btn.active{
  background:var(--accent);
  border-color:var(--accent-strong);
  color:#020617;
}

/* 버튼 글씨가 폰트 미리보기처럼 보이게 */
.title-font-toggle .toggle-btn[data-font="pretendard"],
.text-font-toggle  .toggle-btn[data-font="pretendard"]{
  font-family:"PretendardSemiBoldLocal","Pretendard",system-ui,sans-serif;
}
.title-font-toggle .toggle-btn[data-font="laudrygo"],
.text-font-toggle  .toggle-btn[data-font="laudrygo"]{
  font-family:"LaudrygoLocal",system-ui,sans-serif;
}
.title-font-toggle .toggle-btn[data-font="nanum"],
.text-font-toggle  .toggle-btn[data-font="nanum"]{
  font-family:"NanumNaMuJeongWeonLocal",system-ui,sans-serif;
}
.title-font-toggle .toggle-btn[data-font="bagel"],
.text-font-toggle  .toggle-btn[data-font="bagel"]{
  font-family:"BagelFatOneLocal",system-ui,sans-serif;
}

/* ---------- Speed Row ---------- */
.speed-row{
  display:flex;
  align-items:center;
  gap:8px;
}
.speed-row input[type="range"]{ flex:1; min-height:auto; }
.speed-row span{
  font-size:12px;
  color:var(--muted);
  min-width:40px;
  text-align:right;
}

/* ---------- Block List ---------- */
.block-list{
  list-style:none;
  padding-left:0;
  margin:4px 0 0;
  max-height:180px;
  overflow-y:auto;
  font-size:13px;
}
.block-list li{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  margin-bottom:6px;
  border-radius:10px;
  border:1px solid var(--border);
  cursor:pointer;
  min-width:0;
  overflow:hidden;
}
.block-list span.time{
  flex:1 1 auto;
  min-width:120px;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  font-weight:500;
  color:var(--fg);
}
.block-right-group{
  display:flex;
  align-items:center;
  gap:6px;
  flex-shrink:0;
}
.block-list span.count{
  font-size:12px;
  color:var(--muted);
  white-space:nowrap;
}
.block-delete-btn{
  width:22px !important;
  min-width:22px !important;
  height:22px !important;
  padding:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:12px;
  color:var(--muted);
  background:transparent;
  border:1px solid var(--border);
  border-radius:50%;
  cursor:pointer;
  flex-shrink:0;
}

/* ---------- Step1 Placeholder ---------- */
/* Step1에서는 타임라인 대신 안내 메시지 표시 */
.step1-placeholder{
  display:none;
  align-items:center;
  justify-content:center;
  font-size:13px;
  color:var(--muted);
  text-align:center;
  padding:16px;
  height:100%;
}

body[data-step="1"] .timeline-viewport{ display:none; }
body[data-step="1"] .step1-placeholder{ display:flex; }
body[data-step="1"] .main{ display:none !important; }
body[data-step="1"] .sidebar{
  width:100% !important;
  max-width:480px;
  margin:0 auto;
  border-right:none;
}
body[data-step="2"] .timeline-viewport,
body[data-step="3"] .timeline-viewport{ display:block; }
body[data-step="2"] .step1-placeholder,
body[data-step="3"] .step1-placeholder{ display:none; }


/* ============================================================================
